<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Klif Booking</title>
  <style>
    /* Brutalist aesthetics: raw, minimal, and unpolished */
    body {
      margin: 0;
      padding: 40px;
      background: #fff;
      color: #000;
      font-family: monospace;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
    }
    h1, h2 {
      text-align: center;
    }
    .box, .step {
      border: 3px solid #000;
      padding: 20px;
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin: 10px 0;
    }
    button {
      margin: 10px 5px 0 0;
      padding: 10px 15px;
      border: 2px solid #000;
      background: none;
      font-family: monospace;
      cursor: pointer;
    }
    select, input {
      font-family: monospace;
      padding: 5px;
      margin: 5px 0;
    }
    .legal {
      text-align: center;
      font-size: 0.8em;
      margin-top: 40px;
      border-top: 1px solid #000;
      padding-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Klif Booking</h1>
    <form id="bookingForm">
      <!-- Step 1: Product and Currency Selection -->
      <div class="step" id="step1">
        <h2>Step 1: Choose Product & Currency</h2>
        <label>
          <input type="radio" name="product" value="single" required> Rock Climbing Single
        </label>
        <label>
          <input type="radio" name="product" value="group" required> Rock Climbing Group
        </label>
        <div>
          <strong>Price:</strong> <span id="priceDisplay"></span>
        </div>
        <label>
          <input type="radio" name="currency" value="USD" checked> USD
        </label>
        <label>
          <input type="radio" name="currency" value="EUR"> EUR
        </label>
        <button type="button" onclick="nextStep(1)">Next</button>
      </div>

      <!-- Step 2: Date Selection -->
      <div class="step" id="step2" style="display:none;">
        <h2>Step 2: Select Date</h2>
        <select id="dateSelect" name="date" required></select>
        <button type="button" onclick="prevStep(2)">Back</button>
        <button type="button" onclick="nextStep(2)">Next</button>
      </div>

      <!-- Step 3: Session Selection -->
      <div class="step" id="step3" style="display:none;">
        <h2>Step 3: Choose Session</h2>
        <label>
          <input type="radio" name="session" value="sunrise" required> Sunrise (6-10am) – <span>Available: 12/12</span>
        </label>
        <label>
          <input type="radio" name="session" value="sunset" required> Sunset (3-6pm) – <span>Available: 12/12</span>
        </label>
        <button type="button" onclick="prevStep(3)">Back</button>
        <button type="button" onclick="nextStep(3)">Next</button>
      </div>

      <!-- Step 4: Personal Details -->
      <div class="step" id="step4" style="display:none;">
        <h2>Step 4: Your Details</h2>
        <label>Name: <input type="text" name="name" required></label>
        <label>Email: <input type="email" name="email" required></label>
        <label>Phone: <input type="tel" name="phone" required></label>
        <button type="button" onclick="prevStep(4)">Back</button>
        <button type="button" onclick="nextStep(4)">Next</button>
      </div>

      <!-- Step 5: Review & Checkout -->
      <div class="step" id="step5" style="display:none;">
        <h2>Step 5: Review & Pay</h2>
        <div id="reviewSection"></div>
        <button type="button" onclick="prevStep(5)">Back</button>
        <button type="submit">Pay</button>
      </div>
    </form>
    <div class="legal">
      <p>Note: Klif Est OÜ only charges a commission to Klif Curacao BV. The operational company is Klif Curacao BV.</p>
    </div>
  </div>

  <script>
    let currentStep = 1;
    function showStep(step) {
      document.querySelectorAll('.step').forEach(div => div.style.display = 'none');
      document.getElementById('step' + step).style.display = 'block';
    }
    function nextStep(step) {
      if(validateStep(step)){
        currentStep++;
        if(currentStep === 2){
          generateDateOptions();
        }
        if(currentStep === 5){
          updateReview();
        }
        showStep(currentStep);
      }
    }
    function prevStep(step) {
      currentStep--;
      showStep(currentStep);
    }
    function validateStep(step) {
      const inputs = document.querySelectorAll('#step' + step + ' input, #step' + step + ' select');
      for(let input of inputs) {
        if(!input.checkValidity()){
          alert('Please fill out all required fields.');
          return false;
        }
      }
      return true;
    }
    // Update price display based on product and currency selection.
    function updatePrice() {
      const product = document.querySelector('input[name="product"]:checked');
      const currency = document.querySelector('input[name="currency"]:checked');
      let price = 0;
      if(product && currency) {
        if(product.value === 'single'){
          price = (currency.value === 'USD') ? 100 : 96;
        } else if(product.value === 'group'){
          price = (currency.value === 'USD') ? 90 : 86;
        }
        document.getElementById('priceDisplay').innerText = currency.value + ' ' + price;
      }
    }
    document.querySelectorAll('input[name="product"]').forEach(el => el.addEventListener('change', updatePrice));
    document.querySelectorAll('input[name="currency"]').forEach(el => el.addEventListener('change', updatePrice));
    updatePrice();

    // Generate date options for the next 12 available days (Thursday, Friday, Saturday).
    function generateDateOptions(){
      const select = document.getElementById('dateSelect');
      select.innerHTML = '';
      const today = new Date();
      let count = 0;
      let date = new Date(today);
      while(count < 12){
        // In JavaScript: 0=Sunday, 1=Monday, ..., 4=Thursday, 5=Friday, 6=Saturday.
        const day = date.getDay();
        if(day === 4 || day === 5 || day === 6){
          const option = document.createElement('option');
          option.value = date.toISOString().split('T')[0];
          option.text = date.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
          select.appendChild(option);
          count++;
        }
        date.setDate(date.getDate() + 1);
      }
    }
    
    // Update review section with all selections.
    function updateReview(){
      const product = document.querySelector('input[name="product"]:checked').value;
      const currency = document.querySelector('input[name="currency"]:checked').value;
      const price = (product === 'single') ? ((currency === 'USD') ? 100 : 96) : ((currency === 'USD') ? 90 : 86);
      const date = document.getElementById('dateSelect').value;
      const session = document.querySelector('input[name="session"]:checked').value;
      const name = document.querySelector('input[name="name"]').value;
      const email = document.querySelector('input[name="email"]').value;
      const phone = document.querySelector('input[name="phone"]').value;
      let reviewHTML = '<p><strong>Product:</strong> ' + (product === 'single' ? 'Rock Climbing Single' : 'Rock Climbing Group') + '</p>';
      reviewHTML += '<p><strong>Price:</strong> ' + currency + ' ' + price + '</p>';
      reviewHTML += '<p><strong>Date:</strong> ' + date + '</p>';
      reviewHTML += '<p><strong>Session:</strong> ' + (session === 'sunrise' ? 'Sunrise (6-10am)' : 'Sunset (3-6pm)') + '</p>';
      reviewHTML += '<p><strong>Name:</strong> ' + name + '</p>';
      reviewHTML += '<p><strong>Email:</strong> ' + email + '</p>';
      reviewHTML += '<p><strong>Phone:</strong> ' + phone + '</p>';
      document.getElementById('reviewSection').innerHTML = reviewHTML;
    }
    
    // Handle form submission by redirecting to Stripe.
    document.getElementById('bookingForm').addEventListener('submit', function(e){
      e.preventDefault();
      // Replace the URL below with your actual Stripe Checkout session URL.
      window.location.href = 'https://stripe.com/checkout';
    });
  </script>
</body>
</html>
